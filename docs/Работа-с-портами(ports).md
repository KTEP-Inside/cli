## Содержание

1. [Основная информация](#основная-информация)
2. [Глобальные флаги](#глобальные-флаги)
3. [Список команд](#список-команд)
    1. [Init](#init)
    2. [Allocate](#create)
    3. [Free](#free)
    4. [Ls](#ls)
    5. [Status](#status)

## Основная информация

Модуль отвечающий за работу с портами и их ассоциацию с проектом.

```bash
kinsidectl ports subcommand [...args] [...flags]
```

## Глобальные флаги

1. -h/--help - выводит подсказку со списком команд и объянениями их работы.

## Список команд

1. [Init](#init)
2. [Allocate](#allocate)
3. [Free](#free)
4. [Ls](#ls)
5. [Status](#status)

### Init

Инициализирует [конфигурацию поров](./Глобальное-состояние-и-файлы-конфигурации.md#порты) на основании [конфигурации по умолчанию](./Глобальное-состояние-и-файлы-конфигурации.md#базовая-конфигурация) или переписывает уже созданную. Следует выполнять только после первой установки или когда нужно сбросить текущую конфигурацию.

```bash
kinsidectl ports init
```

#### Флаги

1. --rewrite - перезаписать текущую конфигурацию, если такая существует

### Allocate

Выделяет порты и создает ассоциацию их с проектом.

Диапазоны и типы портов берутся из [базовой конфигурации](./Глобальное-состояние-и-файлы-конфигурации.md#базовая-конфигурация).

#### Обязательные флаги

1. --project - название проекта, к которому будет привязан порт
2. -t/--type - тип или направление выделяемого порта.

Пример использования:

```bash
kinsidectl ports allocate --project project-name -t web
```

Команда выделит один порт из диапазона web для проекта project-name.

#### Флаги

1. -c/--count - количество выделяемых портов, по умолчанию 1.

### Free

Освобождает все порты проекта, все порты типа на проекте или конкретный порт в конкретном типе.

#### Обязательные флаги

1. --project - названгие проекта, от которого отвязывается порт

Пример использования:

```bash
kinsidectl ports free --project project-name
```

Команда удалит все порты, выделенные под проект.

#### Флаги

1. -t/--type - тип или направление выделяемого порта.
2. --port-index - индекс порта в массиве. **Применяется только с флагом -t/--type**

```bash
kinsidectl ports free --project project-name -t web --port-index 1
```

Удалит порт у проекта project-name в типе web под индексом 1.

### Ls

Выводит список портов по типам(направлениям) выделенного для проекта.

#### Обязательные флаги

1. --project - название проекта

```bash
kinsidectl ports ls --project project-name
```

Пример вывода:

```bash
{
	"db": [3001],
	"web": [501],
	"backend": [1501]
}
```

#### Флаги

1. -t/--type - тип или направление выделяемого порта.
   Пример использования:

```bash
kinsidectl ports ls --project project-name --type web
```

Пример вывода:

```bash
[501]
```

### Status

Выводит текущее состояние, т.е. номера следующих портов по типа(направлениям) и уже освобожденные.

Пример использования:

```bash
kinsidectl ports status
```

Пример вывода:

```bash
{
	"web": {
		"next": 502,
		"free": []
	},
	"back": {
		"next": 1502,
		"free": []
	},
	"db": {
		"next": 3002,
		"free": []
	},
	"other": {
		"next": 5001,
		"free": []
	},
	"reserve": {
		"next": 8001,
		"free": []
	}
}
```
